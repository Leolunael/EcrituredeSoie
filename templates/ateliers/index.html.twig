{% extends 'base.html.twig' %}

{% block title %}√âcriture de Soie{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/style.css') }}">
{% endblock %}

{% block body %}
    <a href="{{ path('app_home') }}" class="retour-button">Retour</a>

    {# ========== ATELIERS PR√âSENTIELS ========== #}
    <br><h1>Ateliers d'√©criture</h1>
    <p class="texte">L‚Äôatelier d‚Äô√©criture est un laboratoire d‚Äôexp√©riences, un lieu de partage cadr√©.
        Un temps ralenti, hors du quotidien, o√π les propositions sugg√®rent, d√©placent, et lib√®rent du syndrome de la page blanche.
        On n‚Äôy cherche pas la performance, mais la justesse.

        Ce n‚Äôest ni un cours ni une formation.
        Il n‚Äôy a pas de jugement sur le fond ou la forme, pas d‚Äô√©valuation, pas de hi√©rarchie des textes.

        Dans √âcriture de Soie, comme son nom l‚Äôindique, il y a aussi une part d‚Äô√©criture de soi.
        Et cela change la position.

        On √©crit depuis soi-m√™me, avec lenteur et d√©licatesse.
        Parce que l‚Äôon s‚Äôapproche de ses failles, de ses forces aussi, parfois encore mal connues.
        C‚Äôest un acte subjectif.
        Une √©criture plus pr√®s du c≈ìur.

        Ici, on √©crit autrement.</p><br>

    <section class="cards-container">
    {% if ateliers|length > 0 %}
        {% for atelier in ateliers %}
            <div class="card">
                <h5 class="titre">{{ atelier.titre }}</h5>
                <div class="card-body">
                    {% if atelier.dateAtelier %}
                        {% set jours = ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'] %}
                        {% set jourSemaine = jours[atelier.dateAtelier|date('w')] %}
                        <p>üìÖ <strong>{{ jourSemaine }} {{ atelier.dateAtelier|date('d/m/Y √† H:i') }}
                                {% if atelier.heureFin %}
                                    - {{ atelier.heureFin|date('H:i') }}
                                {% endif %}
                            </strong></p>
                    {% endif %}

                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        {% if atelier.lieu %}
                            <p style="margin: 0;">üìç {{ atelier.lieu }}</p>
                        {% else %}
                            <p style="margin: 0;"></p>
                        {% endif %}

                        {% if atelier.placesMax %}
                            {% set placesRestantes = atelier.placesMax - atelier.inscriptions|length %}
                            {% if placesRestantes > 0 %}
                                <span class="places-info places-restantes" style="margin-left: auto;">
                                    üë• {{ placesRestantes }} place(s) restante(s)
                                </span>
                            {% else %}
                                <span class="places-info atelier-complet" style="margin-left: auto;">
                                    Complet
                                </span>
                            {% endif %}
                        {% endif %}
                    </div>

                    {% if atelier.prix %}
                        <p style="margin-bottom: 0.5rem;">üí∂ {{ atelier.prix }} ‚Ç¨</p>
                    {% else %}
                        <p style="margin-bottom: 0.5rem;">Gratuit</p>
                    {% endif %}

                    <br>

                    <p>{{ atelier.description|u.truncate(150, '...') }}</p>

                    <a href="{{ path('app_atelier_show', {id: atelier.id}) }}" class="button">Je participe</a>
                </div>
            </div>
        {% endfor %}

        </section>
    {% else %}
        <i>üìÖ</i>
        <h3>">Aucun atelier disponible pour le moment</h3>
        <p>Revenez bient√¥t pour d√©couvrir nos prochains ateliers !</p>
    {% endif %}

    <br>
    <hr>

    {# ========== VISIOCONF√âRENCES ========== #}
    <br><h1>Ateliers en visio</h1>
    <p>Participez √† nos ateliers en ligne depuis chez vous</p><br>

    <section class="cards-container">
        {% if visios|length > 0 %}
            {% for visio in visios %}
                <div class="card">
                    <h5 class="titre">{{ visio.titre }}</h5>
                    <div class="card-body">
                        {% set jours = ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'] %}
                        {% set jourSemaine = jours[visio.dateVisio|date('w')] %}
                        <p>üìÖ <strong>{{ jourSemaine }} {{ visio.dateVisio|date('d/m/Y √† H:i') }}</strong></p>

                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                            <p style="margin: 0;">üí∂ <strong>{{ visio.prix }} ‚Ç¨</strong></p>

                            {# Affichage des places pour les visios #}
                            {% if visio.placesMax %}
                                {% set placesRestantes = visio.placesMax - visio.inscriptions|length %}
                                {% if placesRestantes > 0 %}
                                    <span class="places-info places-restantes" style="margin-left: auto;">
                                        üë• {{ placesRestantes }} place(s) restante(s)
                                    </span>
                                {% else %}
                                    <span class="places-info atelier-complet" style="margin-left: auto;">
                                        Complet
                                    </span>
                                {% endif %}
                            {% endif %}
                        </div>

                        {% if visio.description %}
                            <p>{{ visio.description|u.truncate(100, '...') }}</p>

                        {% endif %}
                    </div>
                    <a href="{{ path('app_visio_show', {id: visio.id}) }}" class="button">Je participe</a>
                </div>
            {% endfor %}

        {% else %}
            <h3>Aucune visioconf√©rence disponible pour le moment</h3>
            <p>Revenez bient√¥t pour d√©couvrir nos prochains ateliers en ligne !</p>
        {% endif %}
    </section>
    <br>
    <hr>

    {# ========== LES LETTRES D AGNES (COURRIERS) ========== #}
    <br><h1>Les lettres d'Agn√®s</h1>

    <h5>Recevoir une lettre, c'est recevoir une pr√©sence</h5>
    <p>√âcriture de Soie propose d'envoyer, chaque mois, une lettre po√©tique √† ceux qui souhaitent s'offrir une parenth√®se d'√©criture et de douceur.</p>
    <p>Chaque enveloppe contient un po√®me, une jolie carte postale, quelques mots bienveillants, parfois une petite surprise ‚Äî toujours √©crits et choisis avec soin.</p>
    <p>Il ne s'agit pas d'une correspondance, mais d'un geste d'attention, un moment pour soi gliss√© dans la bo√Æte aux lettres.</p><br>

    <section class="cards-container">
        {% if lettres|length > 0 %}
            {% for lettre in lettres %}
                <div class="card">
                    <h5 class="titre">{{ lettre.titre }}</h5>
                    <div class="card-body">
                        <p>üí∂ <strong>{{ lettre.prix }} ‚Ç¨</strong></p>

                        {% if lettre.description %}
                            <p>{{ lettre.description|u.truncate(120, '...') }}</p>
                        {% endif %}
                    </div>
                    <a href="{{ path('app_lettre_show', {id: lettre.id}) }}" class="button">Je participe</a>
                </div>
            {% endfor %}

        {% else %}
            <h3>Aucune lettre disponible pour le moment</h3>
            <p>Revenez bient√¥t pour d√©couvrir nos prochaines lettres du c≈ìur !</p>
        {% endif %}
    </section>

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/script.js') }}"></script>
{% endblock %}

