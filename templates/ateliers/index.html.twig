{% extends 'base.html.twig' %}

{% block title %}√âcriture de Soie{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/style.css') }}">
{% endblock %}

{% block body %}
    <a href="{{ path('app_home') }}" class="retour-button">Retour</a>

    {# ========== ATELIERS PR√âSENTIELS ========== #}
    <br><h1>Ateliers d'√©criture</h1>
    <p class="texte">
        Un atelier d‚Äô√©criture est un espace √† part.<br>
        Un temps ralenti, hors du quotidien, o√π l‚Äôon √©crit sans pression ni performance.
        <br>
        Ce n‚Äôest ni un cours ni une formation.<br>
        Il n‚Äôy a pas de jugement, pas d‚Äô√©valuation, pas de hi√©rarchie des textes.
        <br>
        Dans √âcriture de Soie, l‚Äô√©criture engage aussi le soi.<br>
        On √©crit depuis soi-m√™me, avec lenteur et d√©licatesse, au plus pr√®s du c≈ìur.
        <br>
        <br>
        Ici, on √©crit autrement.</p><br>

    <section class="cards-container">
    {% if ateliers|length > 0 %}
        {% for atelier in ateliers %}
            <div class="card">
                <h5 class="titre">{{ atelier.titre }}</h5>
                <div class="card-body">
                    {% if atelier.dateAtelier %}
                        {% set jours = ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'] %}
                        {% set jourSemaine = jours[atelier.dateAtelier|date('w')] %}
                        <p>üìÖ <strong>{{ jourSemaine }} {{ atelier.dateAtelier|date('d/m/Y') }}
                                {% if atelier.heureDebut %}de {{ atelier.heureDebut|date('H\\hi') }}{% endif %}
                                {% if atelier.heureFin %}√† {{ atelier.heureFin|date('H\\hi') }}{% endif %}
                            </strong></p>
                    {% endif %}

                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        {% if atelier.lieu %}
                            <p style="margin: 0;">üìç {{ atelier.lieu }}</p>
                        {% else %}
                            <p style="margin: 0;"></p>
                        {% endif %}

                        {% if atelier.placesMax %}
                            {% set placesRestantes = atelier.placesMax - atelier.inscriptions|length %}
                            {% if placesRestantes > 0 %}
                                <span class="places-info places-restantes" style="margin-left: auto;">
                                    üë• {{ placesRestantes }} place(s) restante(s)
                                </span>
                            {% else %}
                                <span class="places-info atelier-complet">
                                    COMPLET
                                </span>
                            {% endif %}
                        {% endif %}
                    </div>

                    {% if atelier.prix %}
                        <p style="margin-bottom: 0.5rem;">üí∂ {{ atelier.prix }} ‚Ç¨</p>
                    {% else %}
                        <p style="margin-bottom: 0.5rem;">Gratuit</p>
                    {% endif %}

                    <br>

                    {% if atelier.description %}
                        <p>{{ atelier.description|u.truncate(150, '...') }}</p>
                    {% endif %}
                    {% if atelier.informations %}
                        <p>{{ atelier.informations|u.truncate(150, '...') }}</p>
                    {% endif %}

                    <a href="{{ path('app_atelier_show', {id: atelier.id}) }}" class="button">Je participe</a>
                </div>
            </div>
        {% endfor %}

        </section>
    {% else %}
        <i>üìÖ</i>
        <h3>">Aucun atelier disponible pour le moment</h3>
        <p>Revenez bient√¥t pour d√©couvrir nos prochains ateliers !</p>
    {% endif %}

    <br>
    <hr>

    {# ========== VISIOCONF√âRENCES ========== #}
    <br><h1>Ateliers en visio</h1>
    <p class="texte">Participez √† nos ateliers en ligne depuis chez vous</p><br>

    <section class="cards-container">
        {% if visios|length > 0 %}
            {% for visio in visios %}
                <div class="card">
                    <h5 class="titre">{{ visio.titre }}</h5>
                    <div class="card-body">
                        {% if visio.dateVisio %}
                            {% set jours = ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'] %}
                            {% set jourSemaine = jours[visio.dateVisio|date('w')] %}
                            <p>üìÖ <strong>{{ jourSemaine }} {{ visio.dateVisio|date('d/m/Y') }}
                                    {% if visio.heureDebut %}de {{ visio.heureDebut|date('H\\hi') }}{% endif %}
                                    {% if visio.heureFin %}√† {{ visio.heureFin|date('H\\hi') }}{% endif %}
                                </strong></p>
                        {% endif %}

                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                            <p style="margin: 0;">üí∂ <strong>{{ visio.prix }} ‚Ç¨</strong></p>

                            {# Affichage des places pour les visios #}
                            {% if visio.placesMax %}
                                {% set placesRestantes = visio.placesMax - visio.inscriptions|length %}
                                {% if placesRestantes > 0 %}
                                    <span class="places-info places-restantes" style="margin-left: auto;">
                                        üë• {{ placesRestantes }} place(s) restante(s)
                                    </span>
                                {% else %}
                                    <span class="places-info atelier-complet" style="margin-left: auto;">
                                        Complet
                                    </span>
                                {% endif %}
                            {% endif %}
                        </div>

                        {% if visio.description %}
                            <p>{{ visio.description|u.truncate(150, '...') }}</p>
                        {% endif %}
                        {% if visio.informations %}
                            <p>{{ visio.informations|u.truncate(150, '...') }}</p>
                        {% endif %}
                    </div>
                    <a href="{{ path('app_visio_show', {id: visio.id}) }}" class="button">Je participe</a>
                </div>
            {% endfor %}

        {% else %}
            <h3>Aucune visioconf√©rence disponible pour le moment</h3>
            <p>Revenez bient√¥t pour d√©couvrir nos prochains ateliers en ligne !</p>
        {% endif %}
    </section>
    <br>
    <hr>

    {# ========== ATELIERS VOLLON ========== #}
    <br><h1>Ateliers d'√©criture √† l'espace Vollon</h1>

    <section class="cards-container">
    {% if vollons|length > 0 %}
        {% for vollon in vollons %}
            <div class="card">
                <h5 class="titre">{{ vollon.titre }}</h5>
                <div class="card-body">
                    {% if vollon.dateVollon %}
                        {% set jours = ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'] %}
                        {% set jourSemaine = jours[vollon.dateVollon|date('w')] %}
                        <p>üìÖ <strong>{{ jourSemaine }} {{ vollon.dateVollon|date('d/m/Y') }}
                                {% if vollon.heureDebut %}de {{ vollon.heureDebut|date('H\\hi') }}{% endif %}
                                {% if vollon.heureFin %}√† {{ vollon.heureFin|date('H\\hi') }}{% endif %}
                            </strong></p>
                    {% endif %}

                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        {% if vollon.lieu %}
                            <p style="margin: 0;">üìç {{ vollon.lieu }}</p>
                        {% else %}
                            <p style="margin: 0;"></p>
                        {% endif %}

                        {% if vollon.placesMax %}
                            {% set placesRestantes = vollon.placesMax - vollon.inscriptions|length %}
                            {% if placesRestantes > 0 %}
                                <span class="places-info places-restantes" style="margin-left: auto;">
                                    üë• {{ placesRestantes }} place(s) restante(s)
                                </span>
                            {% else %}
                                <span class="places-info atelier-complet">
                                    COMPLET
                                </span>
                            {% endif %}
                        {% endif %}
                    </div>

                    {% if vollon.prix %}
                        <p style="margin-bottom: 0.5rem;">üí∂ {{ vollon.prix }} ‚Ç¨</p>
                    {% else %}
                        <p style="margin-bottom: 0.5rem;">Gratuit</p>
                    {% endif %}

                    <br>

                    {% if vollon.description %}
                        <p>{{ vollon.description|u.truncate(150, '...') }}</p>
                    {% endif %}
                    {% if vollon.informations %}
                        <p>{{ vollon.informations|u.truncate(150, '...') }}</p>
                    {% endif %}

                    <a href="{{ path('app_vollon_show', {id: vollon.id}) }}" class="button">Je participe</a>
                </div>
            </div>
        {% endfor %}

        </section>
    {% else %}
        <i>üìÖ</i>
        <h3>">Aucun atelier disponible pour le moment</h3>
        <p>Revenez bient√¥t pour d√©couvrir nos prochains ateliers !</p>
    {% endif %}

    <br>
    <hr>

    {# ========== LES LETTRES D AGNES (COURRIERS) ========== #}
    <br><h1>Les lettres d'Agn√®s</h1>

    <p class="texte">Recevoir une lettre, c'est recevoir une pr√©sence</p>
    <p class="texte">√âcriture de Soie propose d'envoyer, chaque mois, une lettre po√©tique √† ceux qui souhaitent s'offrir une parenth√®se d'√©criture et de douceur.</p>
    <p class="texte">Chaque enveloppe contient un po√®me, une jolie carte postale, quelques mots bienveillants, parfois une petite surprise ‚Äî toujours √©crits et choisis avec soin.</p>
    <p class="texte">Il ne s'agit pas d'une correspondance, mais d'un geste d'attention, un moment pour soi gliss√© dans la bo√Æte aux lettres.</p><br>

    <section class="cards-container">
        {% if lettres|length > 0 %}
            {% for lettre in lettres %}
                <div class="card">
                    <h5 class="titre">{{ lettre.titre }}</h5>
                    <div class="card-body">
                        <p>üí∂ <strong>{{ lettre.prix }} ‚Ç¨</strong></p>

                        {% if lettre.description %}
                            <p>{{ lettre.description|u.truncate(300, '...') }}</p>
                        {% endif %}
                    </div>
                    <a href="{{ path('app_lettre_show', {id: lettre.id}) }}" class="button">Je participe</a>
                </div>
            {% endfor %}

        {% else %}
            <h3>Aucune lettre disponible pour le moment</h3>
            <p>Revenez bient√¥t pour d√©couvrir nos prochaines lettres du c≈ìur !</p>
        {% endif %}
    </section>

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/script.js') }}"></script>
{% endblock %}

