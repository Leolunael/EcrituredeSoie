{% extends 'base.html.twig' %}

{% block title %}{{ visio.titre }}{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/styles.css') }}">
{% endblock %}

{% block body %}
    <a href="{{ path('app_visio') }}" type="submit" class="button">Retour</a>
    <h1>{{ visio.titre }}</h1>

    <section class="cards-container">
        <div class="card">
            <h5 class="titre">‚ÑπÔ∏è Informations pratiques</h5>
            <p>üìÖ <strong>Date :</strong> {{ visio.dateVisio|date('d/m/Y') }}</p>
            <p>üí∂ <strong>Tarif :</strong> {{ visio.prix }} ‚Ç¨</p>
            <br>
            <hr>
            <br>

            <div>‚ÑπÔ∏è Le lien de connexion vous sera envoy√© par email apr√®s votre inscription.</div>
            <br>
        </div>

        <div class="card">
            <h5 class="titre">‚úçÔ∏è Inscription</h5>
            {% if inscrit %}
                <!-- Message de confirmation apr√®s inscription -->
                <h5>‚úì Merci pour votre inscription !</h5>
                <p style="margin-bottom: 0;">Votre inscription a bien √©t√© enregistr√©e.</p>
            {% else %}
                {{ form_start(form) }}

                <div class="form">
                    {{ form_label(form.name) }}
                    {{ form_widget(form.name) }}
                    {{ form_errors(form.name) }}
                </div>

                <div class="form">
                    {{ form_label(form.prenom) }}
                    {{ form_widget(form.prenom) }}
                    {{ form_errors(form.prenom) }}
                </div>

                <div class="form">
                    {{ form_label(form.email) }}
                    {{ form_widget(form.email) }}
                    {{ form_errors(form.email) }}
                </div>

                <div class="form">
                    {{ form_label(form.telephone) }}
                    {{ form_widget(form.telephone) }}
                    {{ form_errors(form.telephone) }}
                </div>

                <div class="form">
                    {{ form_label(form.moyenPaiement) }}
                    <div class="radio-group">
                        {{ form_widget(form.moyenPaiement) }}
                    </div>
                    {{ form_errors(form.moyenPaiement) }}
                </div>

                {# Le lien HelloAsso, cach√© par d√©faut #}
                {% if visio.lienHelloAsso %}
                    <div id="helloasso-link">
                        <strong>Pour finaliser votre paiement par CB :</strong><br>
                        Apr√®s validation du formulaire, vous serez redirig√© vers HelloAsso pour effectuer le paiement.
                    </div>
                {% endif %}

                <button type="submit" class="button">Valider</button>
                {{ form_end(form) }}
            {% endif %}
        </div>
    </section>

    {# Afficher la card "Complet" uniquement si la visio est compl√®te #}
    {% if visio.complet %}
        <div class="card mt-3" style="border: 2px solid #dc3545;">
            <div class="card-header" style="background-color: #dc3545; color: white;">
                <h5>‚ùå Complet</h5>
            </div>
            <div class="card-body text-center">
                <p style="margin-bottom: 1rem;">Cette visioconf√©rence affiche complet.</p>
            </div>
        </div>
    {% endif %}

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/scripts.js') }}"></script>
{% endblock %}
